<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		<title>Prompt Test</title>
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" />
		<script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>
		<link rel="stylesheet" href="public/css/style.css"/>
		<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
		<script type="application/javascript" src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
		<script type="application/javascript" src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/vue"></script>
		<!-- Prompt JavaScript - this can be moved to a separate .js file if desired -->
		<script type="application/javascript">
			function Prompt() {
				$("#dialog-form").dialog({
					autoOpen: true,
					modal: true,
					width: "360px",
					buttons: {
						"Ok": function() {
							var prompt_input = $("#prompt_input");
							Init(prompt_input.val());
							$(this).dialog("close");
						},
						"Cancel": function() {
							$(this).dialog("close");
						}
					}
				});
			}

			var app;
			var map;

			function Init(crime_api_url) {
				console.log(crime_api_url);
				map = L.map('map').setView([44.9537, -93.0900], 13);

				L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
				attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
				}).addTo(map);
				
				app = new Vue({
					el: "#app",
					data: {
						input: ""
					}
				});
				
				//Get JSON file form API, use data to populate map//
			}

			function searchLocation(){
				console.log(app.input);

				$.getJSON("https://nominatim.openstreetmap.org/search?q="+app.input+"&format=json", (data) =>{
					console.log(data);
				});


			}
		</script>
		<!-- End: Prompt JavaScript -->
	</head>
	<body onload=Prompt()">
		<div id = "app">
			
			<input v-model = "input">
			<button type = "button" @click = "searchLocation">Search</button>
		</div>
		<div id="map"></div>
		<!-- Prompt -->
		<div id="dialog-form">
			<label for="name">URL for St. Paul Crime API:</label>
			<input type="text" id="prompt_input" class="text ui-widget-content ui-corner-all" style="width: 320px;"/>
		</div>
		<!-- End: Prompt -->
	</body>
</html>